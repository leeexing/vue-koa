vue source code analysis

## 语录均沾

1. 只有 data 中的数据才是响应式的，动态添加进来的数据默认为非响应式
2. 可以通过两种方式动态添加数据的响应式
  * Vue.set(object, key, value) - 使用于添加单个属性
  * Object.assign() - 适用于添加多个属性
3. Vue异步执行DOM更新，监听所有数据改变，一次性更新DOM
  * 可以去除重复数据，对于避免不必要的计算和避免重复DOM操作
  * 如果需要拿到更新后DOM中的书，则需要通过 vue.nextTick(callback) 在DOM更新后，执行某个操作
4. 计算属性是基于他们的依赖进行缓存的，只有在它的依赖发生改变的时候才会重新求值
5. vue实例挂载到页面上时，才可以获取到el中的DO元素，进行DOM操作。-- mounted
6. 单页面应用程序
  * 只有第一次会加载页面，以后的每次请求，仅仅是获取必要的数据，然后，有页面中js解析获取的数据，展示在页面中
  * 多页面应用程序，每次请求服务器返回的都是一个完整的页面
  * 实现思路就是
    - ajax
    - 锚点的使用（window.location.hash #）
    - hashchange 事件 （window.addEventListener('hashchange', function(){})）
7. 路由：浏览器中的哈希值(#hash)与展示视图内容(template)之间的对应规则
*命名规范*
8. 组件名应该始终是多个单词。根组件 App 除外
  * 单文件组件的文件名应该要么始终是单词大写开头
9. 从代码层面来讲，login 和 get_user_info 两件事分开比较好。在这个后端全面微服务的年代，后端同学也想写优雅的代码
10. 后端会验证每一个涉及请求的操作，验证其是否有该操作的权限，每一个后台的请求不管是 get 还是 post 都会让前端在请求 header 里面携带用户的 token，后端会根据该 token 来验证用户是否有权限进行该操作，若没有权限则抛出一个对应的状态码，前端检测到改状态码，做出相应的操作
11. 如果一个页面有很多种不同权限的按钮，我觉得更多的应该是考虑产品层面是否设计合理。
    当然也可以参照路由层面的做法，设计一个操作权限表，但还有有点多次一举。**或者将他封装成一个指令都是可以的**
12. 路由和侧边栏，是组织起一个后台应用的关键骨架。

## 数据双向绑定

1. 数据的改变会引起Dom的改变
2. Dom的改变也会引起数据的变化

### 原理

`Object.defineProperty` 中的 `get, set`

```js
Object.defineProperty(obj, key, {
  get (newVal, oldVal) {},
  set (newVal, oldVal) {}
})
```